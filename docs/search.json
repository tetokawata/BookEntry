[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "データ分析: 入門",
    "section": "",
    "text": "1 はじめに\n本ページでは、データ分析の基本的な手法である「母平均やPopulation OLSの推定方法」をその基本概念とともに紹介します。 特に、「推定対象を定義する母集団上での計算と同じ計算をデータ上で行う」というシンプルな推定方法、優れた方法であることを強調します1。",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>はじめに</span>"
    ]
  },
  {
    "objectID": "index.html#footnotes",
    "href": "index.html#footnotes",
    "title": "データ分析: 入門",
    "section": "",
    "text": "この方法は、プラグイン原理やアナログ原理と呼ばる、より一般的な推定方法のアイディアの一例です。↩︎",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>はじめに</span>"
    ]
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "2  データの要約",
    "section": "",
    "text": "2.1 分布による要約\nデータ分析において、結果を人間が理解できる形で要約することは不可欠です。 これは、分析結果は予測や推薦、社会構造に関する示唆など多様な形で提示されますが、最終的には意思決定者が理解できる形式で示す必要があるためです。\n具体的例を示すために、まずAER packageからCPSSW04データを読み込み、一部の事例を表示します。\nTable 2.1\n\n\nlibrary(tidyverse) # tidyverseパッケージの読み込み\n\ndata(\"CPSSW04\", package = \"AER\") # データの読み込み\n\nhead(CPSSW04) # 一部の事例の抜き出し\n\n  earnings     degree gender age\n1 34.61538   bachelor   male  30\n2 19.23077   bachelor female  30\n3 13.73626 highschool female  30\n4 19.23077   bachelor female  30\n5 19.23077   bachelor   male  25\n6 38.46154   bachelor female  32\nCPSSW04はアメリカの労働者についての調査であり、四つの変数 (所得: earnings, 学位: degree, 性別: gender, 年齢: age) が観察できます。 また合計で 7986 事例が含まれています。\nこのような巨大なデータを直接理解できる人間は、おそらく存在しないでしょう。\nそこで、最も基本的な要約方法は分布表を作成してみます。 分布とは、変数の値が同一である事例数を示します。 例えば、count関数を用いると、学位と性別の分布は次のように計算できます。\ncount(\n  CPSSW04,\n  degree,\n  gender)\n\n      degree gender    n\n1 highschool   male 2772\n2 highschool female 1574\n3   bachelor   male 1901\n4   bachelor female 1739\n\\(n\\) に事例数が表示されています。 例えば、男性で高校卒の事例は2,772件存在することがわかります。\n割合を加えることで、データ全体に占める比率も把握できます。\ndegree gender    n      割合\n1 highschool   male 2772 0.3471074\n2 highschool female 1574 0.1970949\n3   bachelor   male 1901 0.2380416\n4   bachelor female 1739 0.2177561\nCPSSW04において、全体の1/3程度が高校卒の男性であることなどがわかります。",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>データの要約</span>"
    ]
  },
  {
    "objectID": "data.html#分布による要約",
    "href": "data.html#分布による要約",
    "title": "2  データの要約",
    "section": "",
    "text": "2.1.1 分布の限界\nCPSSW04には、earningsやageなどの連続変数も含まれています。 これらはCPSSW04データの特徴を理解する上で、非常に重要な変数でしょう。 しかしながら複数の連続変数を含めると、分布表は巨大になり、理解が困難です。\n例えば、earnings, age, degree, genderについて、度数分布表を作成すると、4,649行の表が作成されます。 このような巨大な分布表の理解は、非常に困難です。\nなお少数の連続変数の分布に注目するのであれば、ヒストグラムなどの分布を可視化するツール (Data visualization)を利用することで、人間が認識しやすくできます。 しかしながら複数の変数の分布を可視化することは、困難です。",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>データの要約</span>"
    ]
  },
  {
    "objectID": "data.html#平均値による要約",
    "href": "data.html#平均値による要約",
    "title": "2  データの要約",
    "section": "2.2 平均値による要約",
    "text": "2.2 平均値による要約\n分布全体の特徴ではなく、個別の変数の特徴を把握する方法も数多く提案されています。 中でも各変数の分布を、その特徴を表す統計量 (statistics) に要約する方法は有力です。\n最も代表的なものは、平均値です。 例えばearningsの平均値 (平均所得) は、以下の方法で計算結果として定義できます。\n\\[\n平均所得 = \\frac{第1事例の所得 + 第2事例の所得 +...}{事例数}\n\\] 平均値は、分布のみを用いて計算することも可能です。\n\\[\n平均所得 = 1\\times 「所得が1」の割合\n\\] \\[\n+ 2\\times 「所得が2」の割合\n\\tag{2.1}\\]\n無論、どちらの方法でも同じ値が計算されます。\nCPSSW04に含まれるすべての変数について、summary関数は、他の統計量とともに、平均値を計算します。\n\n\n\nTable 2.2\n\n\nsummary(CPSSW04)\n\n    earnings             degree        gender          age       \n Min.   : 2.098   highschool:4346   male  :4673   Min.   :25.00  \n 1st Qu.:10.684   bachelor  :3640   female:3313   1st Qu.:27.00  \n Median :14.904                                   Median :30.00  \n Mean   :16.771                                   Mean   :29.75  \n 3rd Qu.:20.292                                   3rd Qu.:32.00  \n Max.   :61.058                                   Max.   :34.00  \n\n\n\n\nMeanに表示される数値が平均値です。 例えば、CPSSW04データにおける平均年齢は29.75才です。\n\n2.2.1 平均値の限界\n平均値には、変数間の関係性を示さないという問題があります。 例えば、Table 2.2 を見ても、earningsとage,degree,genderの間の関係性について、何もわからないでしょう。\n変数間の関係性を把握する方法には、数多くの提案があります。 ここでは条件付き母平均、および線型モデルを用いる方法を紹介します。",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>データの要約</span>"
    ]
  },
  {
    "objectID": "data.html#条件付き平均値による要約",
    "href": "data.html#条件付き平均値による要約",
    "title": "2  データの要約",
    "section": "2.3 条件付き平均値による要約",
    "text": "2.3 条件付き平均値による要約\nもし少数の目的変数と多数の説明変数の関係性を把握することが目標であれば、条件付き分布から計算できる条件付き平均値の利用が有効です。\n条件付き分布は、ある特定の条件を満たす事例内での分布です。 例えば、「大学卒内でのearnings = 1の割合」は以下で計算できます。 \\[\n大学卒内での「所得が1」の事例割合\n\\] \\[\n=\\frac{大学卒かつ「所得が1」の事例割合}{大学卒の事例割合}\n\\]\n条件付き平均値は、ある特定の条件を満たす事例内での平均値です。 例えば、大学卒という条件を満たす平均年齢は以下のように計算できます。\n\\[\n大学卒の平均所得\n\\] \\[\n= 1\\times 大学卒内での「所得が1」の割合\n\\] \\[\n+ 2\\times 大学卒内での「所得が2」の割合 +...\n\\]\n例えば、特定の年齢ごとに条件付き平均賃金を示してみます。\n\nggplot(\n  CPSSW04,\n  aes(\n    x = age,\n    y = earnings\n  )\n) +\n  stat_summary(\n    geom = \"point\"\n  )\n\n\n\n\n\n\n\n\n横軸は年齢、縦軸は平均所得、各点が年齢ごとの条件付き平均賃金を表します。 同図からは、年齢が上がれば、平均所得も上昇する傾向があることがわかります。\n\n2.3.1 条件付き平均値の限界\n説明変数の数が多い場合、大量の条件付き平均値の数が計算されてしまい、理解が困難になります。 例えば、年齢・性別・学位について平均賃金を計算した場合、40 個の組み合わせが発生します。 データの事例数に比べれば、かなり少なくはなりますが、それでも理解には時間がかかるでしょう。",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>データの要約</span>"
    ]
  },
  {
    "objectID": "data.html#線型モデルへの要約",
    "href": "data.html#線型モデルへの要約",
    "title": "2  データの要約",
    "section": "2.4 線型モデルへの要約",
    "text": "2.4 線型モデルへの要約\n大量の変数間の関係性を要約するために、線形モデルを適用する方法が広く用いられます。 例えば、賃金と年齢・学位・性別の関係を次のモデルで表すことを目指します。 \\[\n\\beta_0 + \\beta_1\\times age + \\beta_2\\times degree + \\beta_3\\times gender\n\\tag{2.2}\\]\nただしdegreeとgenderの値は、数字ではなく、文字です。 線型モデルに導入する際には、何らかの数字に変換する必要があります。\nここではbachelorとgenderをダミー変数、degreebachelorとgenderfemale、に変換します。 ダミー変数は、以下のように定義されます。\n\ndegreebachelor: degreeがbachelorだった場合は1、その他の場合は0\ngenderfemale: genderがfemaleだった場合は1、その他の場合は0\n\n\\(\\beta_0,\\beta_1,\\beta_2,\\beta_3\\) はパラメタと呼ばれ、モデルがデータに極力一致するように選ばれます。 このようにデータに合うように設定したモデルの特徴を調べることで、データの特徴を大雑把に理解することができます。\n\n2.4.1 OLS\nモデルをデータに適合される典型的な方法はOLS (最小二乗法) です。 具体的な計算方法を紹介する前に、Rでの実行方法から紹介します。 Rでは、lm関数を用いることで、OLSを容易に実行できます。 例えば、以下のコードで、Equation 2.2 を CPSSW04に適合させることができます。\n\n\n\nTable 2.3\n\n\nlm(earnings ~ age + degree + gender, CPSSW04)\n\n\nCall:\nlm(formula = earnings ~ age + degree + gender, data = CPSSW04)\n\nCoefficients:\n   (Intercept)             age  degreebachelor    genderfemale  \n        1.8838          0.4392          6.8651         -3.1579  \n\n\n\n\n各説明変数名の下の数値が、パラメタの計算結果です。 Equation 2.2 のようなシンプルな線型モデルにおいて、パラメタは各説明変数と結果変数であるearningsの「モデル上での関係性」を表します。 推定結果から、年齢や大学卒は賃金と正の関係があり、男性に比べて女性の賃金が低い傾向にあることがわかります。\n\n\n2.4.2 モデルの定式化\n線型モデルに要約することで、変数間の関係性を「ざっくり」把握することができます。 注意が必要なのは、以上の方法では、どのようなモデルをデータに適合させるのかは、分析者が決定する必要がある点です。\nどのようなモデルが適しているのかは、研究目標により異なります。 「人間がデータの大雑把な特徴を理解する」ことを目標にするのであれば、Equation 2.2 のような、シンプルなモデルが有力です。 このような大雑把な理解を目標に設定されたモデルは、記述モデルと呼ばれます1。\n\n\n2.4.3 OLSの計算方法\nOLSの具体的な計算方法を紹介します。 基本的なアイディアは、データとモデルの乖離度合いを測定する指標である、平均二乗誤差を極力小さくするようにパラメタを算出するというものです。\n例えば、ageのみを説明変数として、earningsについて、以下の線形モデルを設定します。 \\[\n\\beta_0 + \\beta_1\\times age\n\\] ある事例 \\(i\\) についての二乗誤差は以下のように定義されます。 \\[\n事例iの二乗誤差=(事例 i の所得 - \\underbrace{(\\beta_0+\\beta_1\\times 事例iのage)}_{モデルが算出する賃金})^2\n\\]\nOLSは全ての事例について、二乗誤差の平均値 (平均二乗誤差)を最小にするようにパラメタを算出します。\n平均値と同様に、OLSも別の計算方法があります。 この方法は、分布と条件付き平均値のみを用いて計算できます。 以下の条件付き平均値についての二乗誤差を最小化するようにパラメタの値を算出します。\n\\[\n(25才の平均所得 - (\\beta_0+\\beta_1\\times 25))^2\\times 25才の割合\n\\] \\[\n+ (26才の平均所得 - (\\beta_0+\\beta_1\\times 26))^2\\times 26才の割合\n\\] \\[\n+...\n\\]\nこちらの計算方法では、パラメタを「モデルが条件付き平均値に極力適合するように決定」するので、算出されたモデルは条件付き母平均のモデルであると解釈できます。 この解釈は、社会データについてのデータ分析において現実的であり、多くの教科書で採用されています (Angrist and Pischke 2009; Aronow and Miller 2019; Chernozhukov et al. 2024)。\n\n\n2.4.4 線型モデルの限界\n線型モデルは、あくまで関係性を単純化するため、実際の条件付き平均値を完全には反映しません。\n例えばearningsについて、\\(\\beta_0 + \\beta_1\\times age\\) をOLSで当てはめてみます。 実際の条件付き平均値とモデルの関係性は、以下でした。\n\n\n\n\n\n\n\n\n\n各点は年齢ごとの条件付き平均値、直線がOLSで推定された線型モデルとなります。\n線形モデルは、平均賃金と年齢が概ね右上がりの関係 (高年齢は賃金が高い)を捉えることができています。 ただし実際の平均賃金と年齢の関係性は、モデルのように”一直線”ではありません。 線形モデルは、この特徴を捉えることには失敗しています。\n\n\n\n\nAngrist, Joshua D, and Jörn-Steffen Pischke. 2009. Mostly Harmless Econometrics: An Empiricist’s Companion. Princeton university press.\n\n\nAronow, Peter M, and Benjamin T Miller. 2019. Foundations of Agnostic Statistics. Cambridge University Press.\n\n\nChernozhukov, Victor, Christian Hansen, Nathan Kallus, Martin Spindler, and Vasilis Syrgkanis. 2024. “Applied Causal Inference Powered by ML and AI.” arXiv Preprint arXiv:2403.02467.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>データの要約</span>"
    ]
  },
  {
    "objectID": "data.html#footnotes",
    "href": "data.html#footnotes",
    "title": "2  データの要約",
    "section": "",
    "text": "データ分析では、記述を目的としないモデルの推定を目指すことがあります。例えば結果変数の値の予測を目指すモデルは、予測モデルと呼ばれます。予想モデルについては、分析者がモデルの詳細な構造を理解することを主たる目的としないため、より複雑なモデルが設定されます。↩︎",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>データの要約</span>"
    ]
  },
  {
    "objectID": "population.html",
    "href": "population.html",
    "title": "3  母集団の要約と推定",
    "section": "",
    "text": "3.1 推定問題の枠組み\n平均値やOLSの結果は、計算に用いるデータによって異なります。 例えば、1947年に実施された第１回目の労働力調査と2025年に行われた調査では、平均賃金が大きく異なるでしょう。 これは1947年と2025年では、社会状況が大きく異なるので、当然の結果と考えられます。\nでは全く同じ社会を対象とした調査を、複数の研究チームが行った場合に、同じ平均賃金が算出されるでしょうか？ もし同じ結果が得られないのでは、分析結果には、「客観性がなく信用できない」とも考えられます。 このような場合、分析結果をどのように受け取れば良いでしょうか？\n以上の問題は、推定問題と呼ばれ、データ分析における中心的な課題の一つです。",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>母集団の要約と推定</span>"
    ]
  },
  {
    "objectID": "population.html#推定問題の枠組み",
    "href": "population.html#推定問題の枠組み",
    "title": "3  母集団の要約と推定",
    "section": "",
    "text": "3.1.1 頻度論\n推定問題を考える土台となる枠組みとしては、頻度論とベイズ論が有名です。 本ページでは、頻度論に基づく議論を紹介します。\nまずは、以下の思考実験を考えてください。\n\n\n\n\n\n\nImportant 3.1: 思考実験\n\n\n\n日本全国に、「2025年の日本の労働市場」を分析する研究チームが、大量に組織されました。各チームは同じ手順に基づき、平均賃金を計算します。ただしデータの収集は、各チームが独立して行います。\n果たして、各チームは同じ結論にたどり着くでしょうか？\n\n\nもし全てのチームが同じデータと同じコードを使えば、コーディング・ミスなどがない限り同じ結果になるはずです。 ところが、各チームが電話・ネット調査などでそれぞれが独自にデータを集めた場合、調査対象の対象となった回答者の違いから、得られるデータが異なり、結果も変わる可能性があります。\nこの思考実験の結果を順序立てて想像するために、いくつかの理論的な概念を導入します。\n\n\n3.1.2 推定結果と推定目標\n次の2つを区別することが重要です:\n\n推定結果（estimate）：データから実際に計算される値\n推定目標（parameter of interest/estimand）：推定の対象となる“真の値”\n\nたとえば、CPSSW04データから計算される平均所得は、あくまで「推定結果」であり、「全米の平均所得」という推定目標に近づくことを期待して計算されます。\n推定結果と推定目標の関係性を明確にするために、母集団とサンプルングという概念を導入します。",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>母集団の要約と推定</span>"
    ]
  },
  {
    "objectID": "population.html#母集団とサンプルリング",
    "href": "population.html#母集団とサンプルリング",
    "title": "3  母集団の要約と推定",
    "section": "3.2 母集団とサンプルリング",
    "text": "3.2 母集団とサンプルリング\n\n3.2.1 母集団\n母集団 (Population) とは、推定の対象となる集団のことです。 Important 3.1 における母集団は「2025年の労働者」、CPSSW04では、「2004年のアメリカの全世帯」が妥当な母集団でしょう。\n\n3.2.1.1 母分布\n母分布は、母集団における変数の分布です。 本ページでは、データに含まれる変数について、母集団全員を調査し、計算された分布であるとイメージしてください。\n例えばCPSSW04の母集団である2004年のアメリカの全世帯が観察できれば、同年の 特定の \\([\\) 収入、学位、性別、年齢 \\(]\\) が、全人口に占める割合が計算できるはずです。\n以下では、「分析者は母集団を直接観察できず、母分布を実際に計算することは不可能である」、という状況を想定します。 そして、直接知ることができない母分布やその特徴を、データから推定することを試みます。\n\n\n\n3.2.2 推定目標の定義\n本ページでは、母分布そのものではなく、母分布の特徴を推定する方法を紹介します。 推定の対象となる母分布の特徴を、推定目標と呼びます。 代表的なものとしては、母分布から計算された平均値およびOLSの結果があります。\n\n3.2.2.1 母平均\nデータにおける分布と同様に、母分布からも平均値や条件付き平均値を計算できます。 このような母集団における平均値を、母平均と呼びます。\n例えば、母集団における25才の平均所得は以下のように計算できます。\n\\[\n25才の条件付き母平均\n\\] \\[\n= 1\\times 25才における「earningsが1」の条件付き母分布\n\\] \\[\n+ 2\\times 25才における「earningsが2」の条件付き母分布\n\\] \\[\n+...\n\\]\n\n\n3.2.2.2 Population OLS\n本スライドでは、母分布から計算されるOLSの結果を推定目標とします。 このような推定目標を母集団におけるOLS推定値(Population OLS)と呼びます。\n例えば、賃金と年齢の関係性を捉えるために、以下の母集団における平均二乗誤差を最小化する線型モデル (\\(\\beta_0 + \\beta_1\\times age\\)) をPopulation OLSとして定義できます\n\\[\n(25才の母平均 - (\\beta_0+\\beta_1\\times 25))^2\\times 25才の母分布\n\\] \\[\n+ (26才の母平均 - (\\beta_0+\\beta_1\\times 26))^2\\times 26才の母分布\n\\] \\[\n+...\n\\]\nこれらはすべて、実際には観察できない仮想的な計算結果です。 この結果をデータから推定することを目指します。\n\n\n\n3.2.3 サンプリング\nデータは、何らかの方法で選ばれた事例の集まりであると想定します。 この事例を選ぶ過程を、サンプルング (sampling) と呼びます。\n母集団について推測するためには、データと母集団の関係について何らかの仮定を置く必要があります。 特に、母集団の事例をどれだけ偏りなくサンプリングできているのかは、分析の信頼性に大きく影響します。\n最も重要な仮定は、ランダムサンプリングです。\n\n\n\n\n\n\nImportant 3.2: ランダムサンプルングの仮定\n\n\n\n\nデータの各事例は、母集団から個別にランダムに選ばれている\n\n\n\n本ページでは、分析に用いるデータはランダムサンプルングを満たすことを想定します。\n\n\n3.2.4 推定結果と推定方法\n推定結果（estimate）とは、データから計算される値のことです。 この推定結果は、推定対象（母集団上での真の値）に近い値であることが期待されます。\n推定結果を計算する手順のことを、推定方法（estimator）と呼びます。\n\n\n3.2.5 まとめ\n本節で登場した重要な概念と仮定を整理すると、次のようになります。\n\n\n\n\n\n\nImportant母集団、サンプルング、推定対象、推定結果\n\n\n\n\n母集団: 推定対象となる集団\n\n推定対象: 母集団上で行いたい仮想的な計算 (母集団上で行いたい計算)\n\nサンプルング: 母集団から事例を収集する手順\n\nランダムサンプルングの仮定 (Important 3.2) : 事例は、母集団からランダムに選ばれている\n\nデータ: サンプリングされた事例の集団\n\n推定結果: データから計算される結果 (推定対象に近い値であることが期待される)\n推定方法: データから推定結果を計算する具体的な計算方法\n\n\n\n\nこれらの関係は、以下の図にまとめられます：\n\n\n\n“推定問題”\n\n\n図中の実線は、データの分析者が実際に観察・操作できる要素を、点線は想像上の操作や概念を表しています。 例えば、母集団から推定対象を計算する作業を、分析者が実際に行うことはできません。 なぜならば、母集団を直接観察することができないためです。\n\n\n\n\n\n\nImportantポイント\n\n\n\nここまでの枠組みを用いると、Important 3.1 の思考実験の結果は以下のように整理できます。\n\nデータの事例はランダムに選ばれているため、データから得られる推定結果は研究チームによって異なる",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>母集団の要約と推定</span>"
    ]
  },
  {
    "objectID": "population.html#sec-estimate_by_mean",
    "href": "population.html#sec-estimate_by_mean",
    "title": "3  母集団の要約と推定",
    "section": "3.3 推定方法",
    "text": "3.3 推定方法\n母平均やPopulation OLSは、以下の一般的な推定方法が利用できます1。\n\n\n\n\n\n\nImportant 3.3: 母平均やPopualtion OLSの推定\n\n\n\n\n母集団上での仮想的な計算結果 として、推定対象を定義する\n同じ計算をデータ上で行った結果を、推定結果とする\n\n\n\nこの推定方法は、以下の性質から正当化できます。\n\n\n\n\n\n\nImportant 3.4: 一致性\n\n\n\nもしデータに代表性があり、かつ事例数が無限大であれば、データから算出したOLSの結果とPopulation OLSは一致する。\n\n\n一致性からは、データが増えれば増えるほど、推定結果は推定目標に近づくことが期待できます。\nただし、この議論は「母集団において平均値やOLSの結果が計算できる」ということを、前提にしていることに注意してください。 例えば、母分布が「特殊な」場合、母平均が無限大になり、計算できない場合があります2。 またPopulation OLSについては、母集団において多重共線性 が存在する場合、計算は不可能です。 そのため、多重共線性のない定式化を用いて、Population OLS を定義する必要があります。\n\n3.3.1 一致性の限界\n一致性は、推定方法 Important 3.3 を正当化する重要な性質です。 しかしながら、実際のデータ分析においては、それほど実用的な性質ではありません。 なぜならば、Population OLSとデータ上でのOLSが一致するためには、無限大の事例数 が必要となるからです。 いうまでもなく無限大の事例数を持つデータは存在しません。 言い換えると、実際のデータ分析では、推定結果と推定目標は”乖離している”と想定すべきです。\n具体的な例から考えてみます。\n\nlibrary(tidyverse)\n\ndata(\"CPSSW04\", package = \"AER\")\n\nlm(earnings ~ age, CPSSW04)\n\n\nCall:\nlm(formula = earnings ~ age, data = CPSSW04)\n\nCoefficients:\n(Intercept)          age  \n     3.3242       0.4519  \n\n\n以上の結果は、データ上でのOLSでは、ageのパラメタは0.4519であることが確認できます。 一致性から、もしCPSSW04がランダムサンプルングの仮定を満たし、事例数が無限大であれば、「Population OLS におけるageのパラメタも0.4519である」という結論は必ず正しいものとなります。 ところが実際の事例数は、7986 であり、無限ではありません。 このため「Population OLS におけるageのパラメタも0.4519である」は、ほぼぼ間違った結論となります。\n\n\n\n\n\n\nImportantポイント\n\n\n\nここまでの議論から、Important 3.1 の思考実験の結果は以下のように整理できます。\n\n各研究チームは、ランダムサンプリングにより、データを集めたとする\n\nデータの事例数が無限大あれば、データから得られるOLSの結果は、常にPopulation OLSと一致する\n\nデータから得られる推定結果は、どの研究チームでも同じ\n\n現実的な事例数のもとでは、データから得られるOLSの結果は、常にPopulation OLSから乖離\n\nデータから得られる推定結果は、研究チームよって異なる",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>母集団の要約と推定</span>"
    ]
  },
  {
    "objectID": "population.html#信頼区間",
    "href": "population.html#信頼区間",
    "title": "3  母集団の要約と推定",
    "section": "3.4 信頼区間",
    "text": "3.4 信頼区間\n\n3.4.1 統計的推論\nほぼほぼ間違った結論ではなく、正しい結論を示すことは可能でしょうか？ データ分析においては、確実に正しい結論を示すことは、事実上不可能です。 このため多くのデータ分析では、ほぼほぼ正しい結論を示すことを目指します。 このようなほぼほぼ正しい結論を示すプロセスは、統計的推論と呼ばれます。\n\n\n3.4.2 信頼区間\n統計的推論に活用できるツールは、さまざまなものがあります。 代表的なものとして、信頼区間を紹介します。\n\n\n\n\n\n\nImportant信頼区間\n\n\n\n\n推定対象を一定の確率で含むと考えられる、データから計算される区間\ns- 推定対象を含む確率は、信頼確率と呼ばれ、研究者が指定する\n\n\n\nRにおいて、信頼区間を計算する方法は複数存在します。 例えばestimatrパッケージのlm_robust関数を用いれば、以下の仮定のもとで、信頼区間を計算します。\n\n\n\n\n\n\nImportant信頼区間計算の前提条件\n\n\n\n\nデータはランダムサンプルングされている\n事例数は十分にある3\n極端なハズレ値がない\n\n\n\n例えば、以下のコードから、reformの平均値について信頼区間を計算できます。 levelには、 信頼水準 (信頼区間が推定対象を含まむ確率)を指定します。 省略すれば、自動的に \\(0.95\\) が指定され、 \\(95\\%\\) 信頼区間が計算されます。\n\n\n\nTable 3.1\n\n\nestimatr::lm_robust(earnings ~ age, CPSSW04)\n\n             Estimate Std. Error   t value     Pr(&gt;|t|)  CI Lower  CI Upper\n(Intercept) 3.3241841  0.9657404  3.442109 5.801562e-04 1.4310807 5.2172874\nage         0.4519313  0.0329688 13.707847 2.737848e-42 0.3873039 0.5165588\n              DF\n(Intercept) 7984\nage         7984\n\n\n\n\n以上の結果から、「Population OLSにおけるageは、概ね \\(0.387\\sim 0.517\\) である」という主張を行うことができます。\n\n\n\n\n\n\nImportantポイント\n\n\n\nここまでの議論から、Important 3.1 の思考実験の結果は以下のように整理できます。\n\n各研究チームは、ランダムサンプリングにより、十分な事例数があるデータを集め, \\(95\\%\\) 信頼区間を計算したとする\n\n全研究チームの \\(95\\%\\) は、推定対象を含む区間を算出する",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>母集団の要約と推定</span>"
    ]
  },
  {
    "objectID": "population.html#footnotes",
    "href": "population.html#footnotes",
    "title": "3  母集団の要約と推定",
    "section": "",
    "text": "アナログ原理やプラグイン原理として呼ばれています。↩︎\n母平均が計算できないケースとしては、母分布がコーシー分布である場合などが有名です。↩︎\nどのくらいあれば十分なのかは、難しい問題です。ただし多くの教科書では、200事例以上が基準とされています。↩︎",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>母集団の要約と推定</span>"
    ]
  }
]